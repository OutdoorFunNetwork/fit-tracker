<script lang="ts">
	import type { ComponentType } from '$lib/types';
	import type { Snippet } from 'svelte';

	type MessageProps = ComponentType & {
		children: Snippet;
		type: 'error' | 'success' | 'info' | 'warning';
	};
	const { children, type } = $props();
</script>

<div class="messaging {type}">
	<div class="messaging__icon">
		{#if type === 'error'}
			<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M10 6.44971V10.4497M5.33173 1.9375L1.9375 5.33173L1.93442 5.33462C1.59057 5.67847 1.41824 5.85081 1.29492 6.05204C1.18526 6.23098 1.10425 6.4263 1.05526 6.63037C1 6.86055 1 7.10506 1 7.59424V12.4058C1 12.8949 1 13.1395 1.05526 13.3697C1.10425 13.5738 1.18526 13.7688 1.29492 13.9478C1.41857 14.1495 1.59182 14.3228 1.9375 14.6685L5.33173 18.0627C5.67763 18.4086 5.85021 18.5812 6.05204 18.7048C6.23099 18.8145 6.42581 18.8958 6.62988 18.9448C6.85971 19 7.10382 19 7.59151 19H12.4075C12.8952 19 13.1404 19 13.3702 18.9448C13.5743 18.8958 13.7693 18.8145 13.9482 18.7049C14.1501 18.5812 14.323 18.4086 14.6689 18.0627L18.0632 14.6685C18.4091 14.3226 18.5817 14.1496 18.7053 13.9478C18.815 13.7688 18.8953 13.5738 18.9443 13.3697C18.9996 13.1395 19 12.895 19 12.4058V7.59424C19 7.10506 18.9996 6.86055 18.9443 6.63037C18.8953 6.4263 18.815 6.23099 18.7053 6.05205C18.5817 5.85022 18.4091 5.67761 18.0632 5.33173L14.6689 1.9375C14.3233 1.59181 14.15 1.41857 13.9482 1.29492C13.7693 1.18526 13.5743 1.10425 13.3702 1.05526C13.14 1 12.8945 1 12.4053 1H7.59375C7.10457 1 6.86006 1 6.62988 1.05526C6.42581 1.10425 6.23099 1.18526 6.05204 1.29492C5.85204 1.41748 5.68106 1.58847 5.3414 1.92813L5.33173 1.9375ZM10.0498 13.4497V13.5497L9.9502 13.5499V13.4497H10.0498Z"
					stroke="white"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				/>
			</svg>
		{:else if type === 'warning'}
			<svg viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M10 6.00006V10.0001M2.37891 12.1999C1.46947 13.775 1.01489 14.5629 1.08281 15.2092C1.14206 15.7729 1.43792 16.2851 1.89648 16.6182C2.42204 17.0001 3.3309 17.0001 5.14853 17.0001H14.8515C16.6691 17.0001 17.5778 17.0001 18.1034 16.6182C18.5619 16.2851 18.8579 15.7729 18.9172 15.2092C18.9851 14.5629 18.5307 13.775 17.6212 12.1999L12.7715 3.79986C11.8621 2.22468 11.4071 1.43722 10.8135 1.17291C10.2957 0.942364 9.70401 0.942364 9.18619 1.17291C8.59278 1.43711 8.13814 2.22458 7.22946 3.79845L2.37891 12.1999ZM10.0508 13.0001V13.1001L9.9502 13.1003V13.0001H10.0508Z"
					stroke="white"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				/>
			</svg>
		{:else if type === 'success'}
			<svg
				width="20"
				height="20"
				viewBox="0 0 20 20"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					d="M13 8L9 12L7 10M5.33173 1.9375L1.9375 5.33173L1.93442 5.33462C1.59057 5.67847 1.41824 5.85081 1.29492 6.05204C1.18526 6.23098 1.10425 6.4263 1.05526 6.63037C1 6.86055 1 7.10506 1 7.59424V12.4058C1 12.8949 1 13.1395 1.05526 13.3697C1.10425 13.5738 1.18526 13.7688 1.29492 13.9478C1.41857 14.1495 1.59182 14.3228 1.9375 14.6685L5.33173 18.0627C5.67763 18.4086 5.85021 18.5812 6.05204 18.7048C6.23099 18.8145 6.42581 18.8958 6.62988 18.9448C6.85971 19 7.10382 19 7.59151 19H12.4075C12.8952 19 13.1404 19 13.3702 18.9448C13.5743 18.8958 13.7693 18.8145 13.9482 18.7049C14.1501 18.5812 14.323 18.4086 14.6689 18.0627L18.0632 14.6685C18.4091 14.3226 18.5817 14.1496 18.7053 13.9478C18.815 13.7688 18.8953 13.5738 18.9443 13.3697C18.9996 13.1395 19 12.895 19 12.4058V7.59424C19 7.10506 18.9996 6.86055 18.9443 6.63037C18.8953 6.4263 18.815 6.23099 18.7053 6.05205C18.5817 5.85022 18.4091 5.67761 18.0632 5.33173L14.6689 1.9375C14.3233 1.59181 14.15 1.41857 13.9482 1.29492C13.7693 1.18526 13.5743 1.10425 13.3702 1.05526C13.14 1 12.8945 1 12.4053 1H7.59375C7.10457 1 6.86006 1 6.62988 1.05526C6.42581 1.10425 6.23099 1.18526 6.05204 1.29492C5.85204 1.41748 5.68106 1.58847 5.3414 1.92813L5.33173 1.9375Z"
					stroke="white"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				/>
			</svg>
		{:else}
			<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M10 9V14M10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10C19 14.9706 14.9706 19 10 19ZM10.0498 6V6.1L9.9502 6.1002V6H10.0498Z"
					stroke="white"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				/>
			</svg>
		{/if}
	</div>
	<div class="messaging__content">
		{@render children()}
	</div>
</div>

<style>
	.messaging {
		display: flex;
		background: var(--color-grey-50);
		box-shadow: var(--shadow);
		border: solid 1px var(--color-grey-200);
		border-radius: var(--rounded-default);
	}
	.messaging__icon {
		display: flex;
		align-items: center;
		justify-content: center;
		background-color: var(--color-grey-200);
		border-radius: var(--rounded-default);
		border-top-right-radius: 0;
		border-bottom-right-radius: 0;
		padding: 0 var(--size-4);
		background-color: var(--color-primary);

		svg {
			width: 25px;
		}

		.error & {
			background-color: var(--color-red-500);
		}
		.warning & {
			background-color: var(--color-yellow-500);
		}
		.success & {
			background-color: var(--color-green-500);
		}
	}
	.messaging__content {
		display: flex;
		align-items: center;
		padding: var(--size-4);
	}
</style>
